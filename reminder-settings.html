<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=480, initial-scale=1.0" />
  <title>إعدادات التذكير و التنبية</title>
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css"
    rel="stylesheet" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="style/app.css" />
  <link rel="stylesheet" href="style/keyboard.css" />
  <script src="js/keyboard.js"></script>
  <style>
    * {
      user-select: none;
    }



    .phone-container {
      background: #fafafa;
      -ms-overflow-style: none;
      scrollbar-width: none;
      position: relative;
      height: 740px;
      max-width: 480px;
      width: 100%;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .phone-container .content-wrapper {
      flex: 1;
      overflow-y: auto;
      -ms-overflow-style: none;
      scrollbar-width: none;
      padding-bottom: 150px;
    }

    .phone-container .content-wrapper::-webkit-scrollbar {
      display: none;
    }

    .control-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      padding-left: 40px;
      border-bottom: 1px solid #edeeef;
      background: #fff;
      min-height: 75px !important;
    }

    .control-item-label {
      font-size: 18px;
      color: #444;
    }

    .control-item-view {
      font-size: 18px;
      color: #777;
    }

    .control-item-view i.fa-chevron-left {
      font-size: 14px;
      padding-right: 10px;
    }

    .auto-switch {
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: none;
      border: none;
      box-shadow: none;
    }

    .switch-label {
      margin: 0;
      padding: 0;
      cursor: pointer;
      display: inline-block;
      width: 40px;
      height: 15px;
      position: relative;
    }

    .switch-input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .switch-track {
      position: absolute;
      top: 0;
      left: 0;
      width: 50px;
      height: 24px;
      background: #d1d1d6;
      border-radius: 16px;
      transition: background 0.2s;
    }

    .switch-thumb {
      position: absolute;
      top: -2px;
      left: 21px;
      width: 28px;
      height: 28px;
      background: #2056a8;
      border-radius: 50%;
      box-shadow: none;
      transition: left 0.2s, background 0.2s;
    }

    .switch-input:checked+.switch-track {
      background: #c7d9f0;
    }

    .switch-input:checked+.switch-track+.switch-thumb {
      left: 21px;
      background: #2056a8;
    }

    .switch-input:not(:checked)+.switch-track {
      background: #d1d1d6;
    }

    .switch-input:not(:checked)+.switch-track+.switch-thumb {
      left: 0;
      background: #9e9e9e;
    }

    .btn.decrement,
    .btn.increment {
      width: 60px;
      height: 60px;
      background-color: #2e61ae;
      color: white;
      border-radius: 10px;
      font-size: 40px;
      line-height: 1;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* Hide items by default when their switch is off */
    #pump_signal_loss_alert_item,
    #pump_reservoir_change_reminder_item,
    #pump_base_change_reminder_item,
    #cgms_high_glucose_alert_item,
    #cgms_high_glucose_alert_time_item,
    #cgms_low_glucose_alert_item,
    #cgms_low_glucose_alert_time_item,
    #cgms_sustained_high_glucose_alert_item,
    #cgms_glucose_rising_fast_alert_item,
    #cgms_glucose_falling_fast_alert_item,
    #cgms_signal_loss_alert_item {
      display: none;
    }
  </style>
</head>

<body>
  <div class="phone-container">
    <div style="position: relative; z-index: 9999">
      <header class="mb-0">  <div class="white-overlay">
        <div class="icon-block block1"></div>
        <div class="icon-block block2"></div>
        <div class="icon-block block3"></div>
        <div class="icon-block block4"></div>
      </div></header>
      <div
        class="header text-center position-relative d-flex justify-content-center align-items-center pb-2 pt-2 mt-0 bg-white"
        style="font-size: 20px">
        <div>إعدادات التنبيه</div>
        <div class="position-absolute" style="right: 20px; cursor: pointer;" onclick="window.location.href='settings.html'">
          <i class="fa fa-chevron-left"></i>
          رجوع
        </div>
      </div>
    </div>

    <div class="content-wrapper">
    <div class="p-3 text-secondary">أصوات و اهتزازات</div>
    <div class="control-item">
      <div class="control-item-label">أنماط</div>
      <div class="control-item-view">
        <span
          class="control-item-value"
          trigger="true"
          id="alarm_patterns"
          values='["صوت و اهتزاز", "الصوت", "اهتزاز", "لا شيء"]'>
          صوت و اهتزاز
        </span>
        <i class="fa fa-chevron-left"></i>
      </div>
    </div>
    <div class="p-3 text-secondary">تذكيرات المضحة</div>
    <div class="control-item">
      <div class="control-item-label">تنبيه فقدان اشارة المضخة</div>
      <div class="control-item-view">
        <div class="auto-switch form-check form-switch p-0">
          <label class="switch-label">
            <input
              type="checkbox"
              id="pump_signal_loss_alert"
              class="switch-input" />
            <span class="switch-track"></span>
            <span class="switch-thumb"></span>
          </label>
        </div>
      </div>
    </div>
    <div class="control-item" id="pump_signal_loss_alert_item">
      <div class="control-item-label">تنبيه فقدان اشارة المضخة</div>
      <div class="control-item-view">
        <span
          class="control-item-value"
          trigger="true"
          values="[5,10,15,20,25,30,35,40,45,50,55,60]"
          id="pump_signal_loss_alert_time">
          15</span>دقيقة
        <i class="fa fa-chevron-left"></i>
      </div>
    </div>
    <div class="control-item">
      <div class="control-item-label">تذكير بتغيير خزان الأنسولين</div>
      <div class="control-item-view">
        <div class="auto-switch form-check form-switch p-0">
          <label class="switch-label">
            <input
              type="checkbox"
              id="pump_reservoir_change_reminder"
              class="switch-input" />
            <span class="switch-track"></span>
            <span class="switch-thumb"></span>
          </label>
        </div>
      </div>
    </div>
    <div class="control-item">
      <div class="control-item-label">تذكير بتغيير قاعدة المضخة</div>
      <div class="control-item-view">
        <div class="auto-switch form-check form-switch p-0">
          <label class="switch-label">
            <input
              type="checkbox"
              id="pump_base_change_reminder"
              class="switch-input" />
            <span class="switch-track"></span>
            <span class="switch-thumb"></span>
          </label>
        </div>
      </div>
    </div>
    <div class="p-3 text-secondary">
      تنبيه نظام المراقبة المستمرة للجلوكوز
    </div>
    <div class="control-item">
      <div class="control-item-label">تنبيه ارتفاع نسبة الجلوكوز</div>
      <div class="control-item-view">
        <div class="auto-switch form-check form-switch p-0">
          <label class="switch-label">
            <input
              type="checkbox"
              id="cgms_high_glucose_alert"
              class="switch-input" />
            <span class="switch-track"></span>
            <span class="switch-thumb"></span>
          </label>
        </div>
      </div>
    </div>
    <div
      class="control-item"
      id="cgms_high_glucose_alert_item"
      onclick="openModalMs('cgms_high_glucose_alert_modal')">
      <div class="control-item-label">حد تنبيه ارتفاع نسبة الجلوكوز</div>
      <div class="control-item-view" dir="ltr">
        <i class="fa fa-chevron-left"></i>>
        <span class="control-item-value" id="cgms_high_glucose_alert_value">200</span>mg/dl
      </div>
    </div>
    <div class="control-item" id="cgms_high_glucose_alert_time_item">
      <div class="control-item-label">إعدادات التحذير بالارتفاع</div>
      <div class="control-item-view">
        <span
          class="control-item-value"
          values="[5,10,15,20,25,30,35,40,45,50,55,60]"
          trigger="true"
          id="cgms_high_glucose_alert_time">60</span>دقيقة
        <i class="fa fa-chevron-left"></i>
      </div>
    </div>
    <div class="control-item">
      <div class="control-item-label">تنبيه انخفاض نسبة الجلوكوز</div>
      <div class="control-item-view">
        <div class="auto-switch form-check form-switch p-0">
          <label class="switch-label">
            <input
              type="checkbox"
              id="cgms_low_glucose_alert"
              class="switch-input" />
            <span class="switch-track"></span>
            <span class="switch-thumb"></span>
          </label>
        </div>
      </div>
    </div>
    <div
      class="control-item"
      id="cgms_low_glucose_alert_item"
      onclick="openModalMs('cgms_low_glucose_alert_modal')">
      <div class="control-item-label">حد تنبيه انخفاض مستوى الجلوكوز</div>
      <div class="control-item-view" dir="ltr">
        <i class="fa fa-chevron-left"></i>
        <
          <span class="control-item-value" id="cgms_low_glucose_alert_value">79</span>mg/dl
      </div>
    </div>
    <div class="control-item" id="cgms_low_glucose_alert_time_item">
      <div class="control-item-label">إعدادات التحذير بالانخفاض</div>
      <div class="control-item-view">
        <span
          class="control-item-value"
          trigger="true"
          values="[5,10,15,20,25,30,35,40,45,50,55,60]"
          id="cgms_low_glucose_alert_time">15</span>دقيقة
        <i class="fa fa-chevron-left"></i>
      </div>
    </div>
    <div class="control-item">
      <div class="control-item-label">ارتفاع مستمر في نسبة السكر في الدم</div>
      <div class="control-item-view">
        <div class="auto-switch form-check form-switch p-0">
          <label class="switch-label">
            <input
              type="checkbox"
              id="cgms_sustained_high_glucose_alert"
              class="switch-input" />
            <span class="switch-track"></span>
            <span class="switch-thumb"></span>
          </label>
        </div>
      </div>
    </div>
    <div class="control-item">
      <div class="control-item-label">الجلوكوز يرتفع بسرعة</div>
      <div class="control-item-view">
        <div class="auto-switch form-check form-switch p-0">
          <label class="switch-label">
            <input
              type="checkbox"
              id="cgms_glucose_rising_fast_alert"
              class="switch-input" />
            <span class="switch-track"></span>
            <span class="switch-thumb"></span>
          </label>
        </div>
      </div>
    </div>
    <div class="control-item" id="cgms_glucose_rising_fast_alert_item">
      <div class="control-item-label">
        معدل تكرار تنبيه الجلوكوز يرتفع بسرعة
      </div>
      <div class="control-item-view">
        <span
          class="control-item-value"
          trigger="true"
          values="[5,10,15,20,25,30,35,40,45,50,55,60]"
          id="cgms_glucose_rising_fast_alert_time">15</span>دقيقة
        <i class="fa fa-chevron-left"></i>
      </div>
    </div>
    <div class="control-item">
      <div class="control-item-label">الجلوكوز ينخفض بسرعة</div>
      <div class="control-item-view">
        <div class="auto-switch form-check form-switch p-0">
          <label class="switch-label">
            <input
              type="checkbox"
              id="cgms_glucose_falling_fast_alert"
              class="switch-input" />
            <span class="switch-track"></span>
            <span class="switch-thumb"></span>
          </label>
        </div>
      </div>
    </div>
    <div class="control-item" id="cgms_glucose_falling_fast_alert_item">
      <div class="control-item-label">
        معدل تكرار تنبيه الجلوكوز ينخفض بسرعة
      </div>
      <div class="control-item-view">
        <span
          class="control-item-value"
          trigger="true"
          values="[5,10,15,20,25,30,35,40,45,50,55,60]"
          id="cgms_glucose_falling_fast_alert_time">15</span>دقيقة
        <i class="fa fa-chevron-left"></i>
      </div>
    </div>
    <div class="control-item">
      <div class="control-item-label">تنبيه عدم وجود إشارة</div>
      <div class="control-item-view">
        <div class="auto-switch form-check form-switch p-0">
          <label class="switch-label">
            <input
              type="checkbox"
              id="cgms_signal_loss_alert"
              class="switch-input" />
            <span class="switch-track"></span>
            <span class="switch-thumb"></span>
          </label>
        </div>
      </div>
    </div>
    <div class="control-item" id="cgms_signal_loss_alert_item">
      <div class="control-item-label">تنبيه عدم وجود إشارة</div>
      <div class="control-item-view">
        <span
          class="control-item-value"
          trigger="true"
          values="[5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,80,85,90,95,100,105,110,115,120,125,130,135,140,145,150,155,160,165,170,175,180,185,190,195,200]"
          id="cgms_signal_loss_alert_time">20</span>دقيقة
        <i class="fa fa-chevron-left"></i>
      </div>
    </div>
    <div class="control-item">
      <div class="control-item-label">تذكير بعمر المستشعر</div>
      <div class="control-item-view">
        <span
          class="control-item-value"
          trigger="true"
          values="[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24]"
          id="reminder_age">12</span>ساعة
        <i class="fa fa-chevron-left"></i>
      </div>
    </div>
    </div>
    <div
      class="ms-mobile-select custom-ms-modal"
      id="cgms_high_glucose_alert_modal">
    <div
      class="ms-gray-layer"
      onclick="closeModalMs('cgms_high_glucose_alert_modal')"></div>
    <div class="ms-content">
      <div class="ms-panel">
        <div class="ms-fix-width">
          <div class="ms-wheels" style="height: 300px">
            <div
              class="d-flex justify-content-center align-items-center gap-5 my-4">
              <button
                class="btn increment"
                target="cgms_high_glucose_alert">
                <i class="fa fa-plus"></i>
              </button>
              <div
                id="cgms_high_glucose_alert_value_preview"
                class="fs-1"></div>
              <button
                class="btn decrement"
                target="cgms_high_glucose_alert">
                <i class="fa fa-minus"></i>
              </button>
            </div>
            <div
              id="cgms_high_glucose_alert_ruler"
              hasRuller="true"
              minValue="0"
              maxValue="400"
              borderColoring='[{"start":0,"end":200,"color":"#38b27d"},{"start":200,"end":300,"color":"#f9bf13"},{"start":300,"end":400,"color":"red"}]'></div>
            <div class="text-secondary text-center">
              <div class="mb-3">mg/dl</div>
              حرك المسطرة لأدخال قيمة سكر الدم
            </div>
          </div>
        </div>
      </div>
      <div class="ms-footer-bar">
        <div class="ms-fix-width">
          <div
            class="ms-cancel"
            onclick="closeModalMs('cgms_high_glucose_alert_modal')">
            إلغاء
          </div>
          <div
            class="ms-ensure"
            onclick="closeModalMs('cgms_high_glucose_alert_modal')">
            نعم
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    class="ms-mobile-select custom-ms-modal"
    id="cgms_low_glucose_alert_modal">
    <div
      class="ms-gray-layer"
      onclick="closeModalMs('cgms_low_glucose_alert_modal')"></div>
    <div class="ms-content">
      <div class="ms-panel">
        <div class="ms-fix-width">
          <div class="ms-wheels" style="height: 300px">
            <div
              class="d-flex justify-content-center align-items-center gap-5 my-4">
              <button class="btn increment" target="cgms_low_glucose_alert">
                <i class="fa fa-plus"></i>
              </button>
              <div
                id="cgms_low_glucose_alert_value_preview"
                class="fs-1"></div>
              <button class="btn decrement" target="cgms_low_glucose_alert">
                <i class="fa fa-minus"></i>
              </button>
            </div>
            <div
              id="cgms_low_glucose_alert_ruler"
              hasRuller="true"
              minValue="0"
              maxValue="400"
              borderColoring='[{"start":0,"end":80,"color":"red"},{"start":80,"end":400,"color":"#38b27d"}]'></div>
            <div class="text-secondary text-center">
              <div class="mb-3">mg/dl</div>
              حرك المسطرة لأدخال قيمة سكر الدم
            </div>
          </div>
        </div>
      </div>
      <div class="ms-footer-bar">
        <div class="ms-fix-width">
          <div
            class="ms-cancel"
            onclick="closeModalMs('cgms_low_glucose_alert_modal')">
            إلغاء
          </div>
          <div
            class="ms-ensure"
            onclick="closeModalMs('cgms_low_glucose_alert_modal')">
            نعم
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
</body>
<script>
  window.onload = function () {
    document.querySelectorAll(".auto-switch input").forEach(function (input) {
      input.addEventListener("change", function () {
        localStorage.setItem(input.id, input.checked);
        // Handle multiple related items
        document.querySelectorAll('[id^="' + input.id + '_"][id$="_item"]').forEach(function (itemEl) {
          itemEl.style.display = input.checked ? "flex" : "none";
        });
        // Also handle the direct _item
        if (document.getElementById(input.id + "_item")) {
          document.getElementById(input.id + "_item").style.display =
            input.checked ? "flex" : "none";
        }
      });
    });
  };
  function loadSwitchStates() {
    document.querySelectorAll(".auto-switch input").forEach(function (input) {
      const state = localStorage.getItem(input.id);
      // Set default to false if not set
      if (state === null) {
        localStorage.setItem(input.id, "false");
        input.checked = false;
      } else {
        input.checked = state === "true";
      }
      
      // Handle multiple related items
      document.querySelectorAll('[id^="' + input.id + '_"][id$="_item"]').forEach(function (itemEl) {
        itemEl.style.display = input.checked ? "flex" : "none";
      });
      // Also handle the direct _item
      if (document.getElementById(input.id + "_item")) {
        document.getElementById(input.id + "_item").style.display =
          input.checked ? "flex" : "none";
      }
    });
  }
  loadSwitchStates();
</script>
<script src="js/control-screen.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script src="js/m-select.js"></script>
<script src="js/ruler.js"></script>

</html>