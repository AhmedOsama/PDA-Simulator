<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>إقران المُستشعر</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  <link href="style/app.css" rel="stylesheet" />
  <link rel="preload" href="assets/FinalCover.png" as="image">
  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  <style>
    .text-lg {
      font-size: 1.125rem;
      line-height: 2.75rem;
    }

    .pt-2 {
      padding-top: -0.5rem;
    }

 

    .icon-block {
      height: 35px;
    }

    .mobile-screen {
      max-width: 480px;
      height: 800px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      background-color: #ffffff;
    }

    .main-bg-blue {
      background-color: #26579e;
    }

    #serial-input-display.has-cursor::after {
      content: '';
      display: inline-block;
      width: 2px;
      height: 1.75rem;
      background-color: white;
      animation: blink 1s step-end infinite;
      margin-left: 4px;
    }

    @keyframes blink {

      from,
      to {
        background-color: transparent;
      }

      50% {
        background-color: white;
      }
    }
    .cge{
      font-size: 1.5rem;
      line-height: 1.5rem;
      color: #333;
    }
    .cgnum{
      font-size: 1.42rem;
      line-height: 1.75rem;
      color: #8a8a8a;
    }
  </style>
  <link rel="stylesheet" href="style/keyboard.css">
</head>

<body >

  <div class=""style="width:480px">
    <div id="app-container"
      class="mobile-screen w-full sm:h-[740px] flex flex-col phone-container overflow-hidden relative">

      <div id="screen-pair" class="flex flex-col h-full">
        <header class="flex-shrink-0 bg-white text-black mb-0 h-10">
          <div class="white-overlay">
            <div class="icon-block block1"></div>
            <div class="icon-block block2"></div>
            <div class="icon-block block3"></div>
            <div class="icon-block block4"></div>
          </div>
        </header>
        <main class="flex-grow flex flex-col main-bg-blue text-white">
          <div class="px-6 pt-8 pb-4">
            <h1 class="text-center text-2xl fs-2">إقران المُستشعر</h1>
            <div class="mt-8">
              <label class="text-right block mb-2 text-gray-400 " style="
               font-size: 1.35rem;">الرجاء إدخال الرقم التسلسلي</label>
              <div id="serial-input-container" dir="ltr"
                class="flex items-center border-b-2 border-gray-400 py-2 cursor-pointer">
                <input id="serial-input-display" class="flex-grow bg-transparent text-left text-2xl focus:outline-none has-cursor 
                      virtual-keyboard-input" type="text"
                  style="font-weight: 500;font-size:30px ;   font-family:Roboto,sans-serif;" value="2222252Y3T">
              </div>
              <button id="next-btn"
                class="w-full bg-white text-blue-500 font-bold py-3 rounded-lg text-lg shadow-lg mt-8">التالي</button>
              <div class="mt-5">
                <div class="d-flex align-items-center"><svg xmlns="http://www.w3.org/2000/svg"
                    shape-rendering="geometricPrecision" text-rendering="geometricPrecision"
                    image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 512 512"
                    width="20px" height="20px" fill="#fff">
                    <path fill-rule="nonzero"
                      d="M256 0c70.691 0 134.695 28.656 181.021 74.979C483.344 121.305 512 185.309 512 256c0 70.691-28.656 134.695-74.979 181.018C390.695 483.344 326.691 512 256 512c-70.691 0-134.695-28.656-181.018-74.982C28.656 390.695 0 326.691 0 256S28.656 121.305 74.982 74.979C121.305 28.656 185.309 0 256 0zm-10.029 160.379c0-4.319.761-8.315 2.282-11.988 1.515-3.66 3.797-6.994 6.836-9.98 3.028-2.98 6.341-5.241 9.916-6.758 3.593-1.511 7.463-2.282 11.603-2.282 4.143 0 8.006.771 11.564 2.278 3.561 1.521 6.828 3.782 9.808 6.779 2.976 2.987 5.212 6.31 6.695 9.973 1.489 3.663 2.236 7.659 2.236 11.978 0 4.195-.739 8.128-2.229 11.767-1.483 3.631-3.709 6.993-6.692 10.046-2.965 3.043-6.232 5.342-9.79 6.878-3.569 1.528-7.432 2.306-11.592 2.306-4.259 0-8.206-.764-11.834-2.278-3.604-1.522-6.913-3.807-9.892-6.832-2.973-3.046-5.209-6.383-6.685-10.032-1.486-3.646-2.226-7.596-2.226-11.855zm13.492 179.381c-1.118 4.002-3.375 11.837 3.316 11.837 1.451 0 3.299-.81 5.5-2.412 2.387-1.721 5.125-4.336 8.192-7.799 3.116-3.53 6.362-7.701 9.731-12.507 3.358-4.795 6.888-10.292 10.561-16.419a1.39 1.39 0 011.907-.484l12.451 9.237c.593.434.729 1.262.34 1.878-5.724 9.952-11.512 18.642-17.362 26.056-5.899 7.466-11.879 13.66-17.936 18.553l-.095.07c-6.057 4.908-12.269 8.602-18.634 11.077-17.713 6.86-45.682 5.742-53.691-14.929-5.062-13.054-.897-27.885 3.085-40.651l20.089-60.852c1.286-4.617 2.912-9.682 3.505-14.439.974-7.915-2.52-13.032-11.147-13.032h-17.562a1.402 1.402 0 01-1.395-1.399l.077-.484 4.617-16.801a1.39 1.39 0 011.356-1.02l89.743-2.815a1.39 1.39 0 011.434 1.34l-.063.445-38.019 125.55zm151.324-238.547C371.178 61.606 316.446 37.101 256 37.101c-60.446 0-115.174 24.501-154.784 64.112C61.606 140.822 37.101 195.554 37.101 256c0 60.446 24.505 115.178 64.115 154.784 39.606 39.61 94.338 64.115 154.784 64.115s115.178-24.505 154.787-64.115c39.611-39.61 64.112-94.338 64.112-154.784s-24.505-115.178-64.112-154.787z" />
                  </svg>
                  <span class="ms-2 fs-5">
                    اسم البلوتوث المتوافق مع جهاز مراقبة الجلوكوز المستمر
                  </span>
                </div>
                <div class="ms-6 fs-5" style="font-family:Arial, Helvetica, sans-serif;">LinX, AiDEX X</div>
              </div>
            </div>
          </div>
          <div class="flex-grow"></div>
        </main>
        <div id="bottom-bar" class="flex-shrink-0">
          <div id="action-footer" class="bg-[#fff] py-3 px-4 flex justify-between items-center">
            <button id="cancel-btn" class="text-blue-700 text-lg" onclick="handlePdaModeNavigation(); localStorage.setItem('openMenuOnLoad', 'true');">إلغاء</button>
            <button id="scan-btn" class="text-blue-700 text-lg flex items-center gap-2">
              <span>مسح ضوئي للاقتران</span>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="1.2" class="w-8 h-8">
                <path stroke-linecap="round" stroke-linejoin="round"
                  d="M4 8V6a2 2 0 012-2h2M4 16v2a2 2 0 002 2h2m8-16h2a2 2 0 012 2v2m-4 12h2a2 2 0 002-2v-2" />

                <line x1="1" y1="12" x2="23" y2="12" stroke="" stroke-width="1.2" />
              </svg>

            </button>
          </div>
        </div>
      </div>

      <div id="screen-paired" class="hidden flex-col h-full bg-white">
        <header class="flex-shrink-0 bg-white text-black mb-0 h-10">
          <div class="white-overlay">
            <div class="icon-block block1"></div>
            <div class="icon-block block2"></div>
            <div class="icon-block block3"></div>
            <div class="icon-block block4"></div>
          </div>
        </header>
        <div class="flex items-center justify-between px-4 py-4">
          <button id="back-to-pair-btn" onclick="navigateToMainPage()"
            class="flex items-center space-x-1 text-gray-600 font-semibold w-24 justify-start rtl:space-x-reverse">
            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"></path>
            </svg>
            <span style="cursor: pointer; font-size: 23px;">رجوع</span>
          </button>
          <h1 class="text-xl text-gray-800 flex-grow text-center fs-2"style="font-family:Arial, Helvetica, sans-serif;">CGMS</h1>
          <div class="w-24"></div>
        </div>
        <main class="flex-grow pr-4 pt-3 pl-3 space-y-8 text-right">
          <div class="flex justify-between items-center">
            <div class="text-right">
              <p class="" style="COLOR: #3853ad; font-size: 25px;">مقترن</p>
              <div class="flex items-baseline space-x-2 rtl:space-x-reverse justify-end mt-1" style="justify-content: flex-start;">
                <p class=" cgnum">الرقم التسلسلي</p>
                <p class=" font-mono cgnum tracking-wider cgnum" id="paired-serial">2222252Y3T</p>
              </div>
            </div>
            <button id="unpair-btn" class="main-bg-blue text-white rounded-lg  shadow-md" style="font-size: 1.4rem; line-height: 1.25rem; padding:1.3rem  2rem ">إلغاء الاقتران</button>
          </div>
          
          <div class="space-y-1 text-base border-t pt-2">
            <div class="flex flex-col items-start py-3 border-b text-right w-full">
              <span class=" w-full cge">الرقم التسلسلي</span>
              <span id="paired-serial-2"
                class="font-mono tracking-wider mt-1 w-full cgnum"></span>
            </div>
            <div class="flex flex-col items-start py-3 border-b text-right w-full">
              <span class=" w-full cge">عمر المستشعر</span>
              <span class="mt-1 w-full cgnum">15 يوم</span>
            </div>
            <div class="flex flex-col items-start py-3 text-right w-full">
              <span class=" w-full cge">إصدار البرنامج</span>
              <span class="mt-1 w-full cgnum">1.6.0</span>
            </div>
          </div>
        </main>
      </div>

      <div id="modal-connecting" class="absolute inset-0 bg-black/40 flex items-center justify-center hidden z-50 p-4">
        <div class="bg-white rounded-2xl shadow-lg p-6 flex flex-col items-center space-y-4 w-48">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor" class="text-blue-600">
            <rect x="11" y="3" width="2" height="5" rx="1">
              <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.916s"
                repeatCount="indefinite"></animate>
            </rect>
            <rect x="11" y="3" width="2" height="5" rx="1" transform="rotate(30 12 12)">
              <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.833s"
                repeatCount="indefinite"></animate>
            </rect>
            <rect x="11" y="3" width="2" height="5" rx="1" transform="rotate(60 12 12)">
              <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.75s"
                repeatCount="indefinite"></animate>
            </rect>
            <rect x="11" y="3" width="2" height="5" rx="1" transform="rotate(90 12 12)">
              <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.666s"
                repeatCount="indefinite"></animate>
            </rect>
            <rect x="11" y="3" width="2" height="5" rx="1" transform="rotate(120 12 12)">
              <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.583s"
                repeatCount="indefinite"></animate>
            </rect>
            <rect x="11" y="3" width="2" height="5" rx="1" transform="rotate(150 12 12)">
              <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.5s"
                repeatCount="indefinite"></animate>
            </rect>
            <rect x="11" y="3" width="2" height="5" rx="1" transform="rotate(180 12 12)">
              <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.416s"
                repeatCount="indefinite"></animate>
            </rect>
            <rect x="11" y="3" width="2" height="5" rx="1" transform="rotate(210 12 12)">
              <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.333s"
                repeatCount="indefinite"></animate>
            </rect>
            <rect x="11" y="3" width="2" height="5" rx="1" transform="rotate(240 12 12)">
              <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.25s"
                repeatCount="indefinite"></animate>
            </rect>
            <rect x="11" y="3" width="2" height="5" rx="1" transform="rotate(270 12 12)">
              <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.166s"
                repeatCount="indefinite"></animate>
            </rect>
            <rect x="11" y="3" width="2" height="5" rx="1" transform="rotate(300 12 12)">
              <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="-0.083s"
                repeatCount="indefinite"></animate>
            </rect>
            <rect x="11" y="3" width="2" height="5" rx="1" transform="rotate(330 12 12)">
              <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="1s" begin="0s" repeatCount="indefinite">
              </animate>
            </rect>
          </svg>
          <p class="text-lg font-semibold text-gray-700">جاري الاتصال...</p>
        </div>
      </div>

      <div id="modal-unpair" class="absolute inset-0 bg-black/40 flex items-end hidden z-50">
        <div class="bg-white shadow-lg w-full">
          <div class="p-6 text-center">
            <h3 class=" text-lg fs-2" style="font-family:Arial, Helvetica, sans-serif;">CGMS</h3>
            <p class="mt-2 text-gray-600 fs-3">إلغاء اقتران المستشعر؟</p>
          </div>
          <div class="flex border-t">
            <button id="unpair-cancel" class="w-1/2 py-2 text-blue-600 text-lg fs-3">لا</button>
            <div class="w-px bg-gray-200"></div>
            <button id="unpair-confirm" class="w-1/2 py-2 text-blue-600 text-lg fs-3">نعم</button>
          </div>
        </div>
      </div>

    </div>
  </div>



</body>
<script>
  class SensorPairingApp {
    constructor() {
      this.serialNumber = "";
      this.elements = this.getDOMElements();
      this.init();
    }
  
    init() {
      this.addEventListeners();
      this.updateInput();
      this.applyForcedStyles();
      this.restoreState();
      this.updatePairingFromStorage();
      window.addEventListener("storage", () => this.updatePairingFromStorage());
    }
  
    applyForcedStyles() {
      document.querySelectorAll('.text-gray-400').forEach(el => el.style.color = 'rgb(231, 231, 231)');
      document.querySelectorAll('.text-sm').forEach(el => { el.style.fontSize = '1.075rem'; el.style.lineHeight = '1.25rem'; });
      document.querySelectorAll('.text-left').forEach(el => el.style.textAlign = 'right');
      document.querySelectorAll('.space-x-1\\.5').forEach(container => {
        const children = Array.from(container.children).filter(child => child.style.display !== 'none');
        children.forEach((child, index) => { if (index > 0) { child.style.marginLeft = '0.05rem'; child.style.marginRight = '0'; } });
      });
      document.querySelectorAll('.justify-end').forEach(el => el.style.justifyContent = 'flex-start');
      document.querySelectorAll('.text-lg').forEach(el => { el.style.fontSize = '1.125rem'; el.style.lineHeight = '2.75rem'; });
      document.querySelectorAll('.pt-2').forEach(el => el.style.paddingTop = '-0.5rem');
    }
  
    getDOMElements() {
      const ids = [
        'app-container', 'screen-pair', 'screen-paired', 'serial-input-display', 'serial-input-container',
        'char-count', 'next-btn', 'unpair-btn', 'modal-connecting', 'modal-unpair', 'unpair-confirm',
        'unpair-cancel', 'back-to-pair-btn', 'paired-serial', 'paired-serial-2', 'action-footer'
      ];
      const elements = {};
      ids.forEach(id => {
        const el = document.getElementById(id);
        if (el) {
          const camelCaseId = id.replace(/-(\w)/g, (_m, p1) => p1.toUpperCase());
          elements[camelCaseId] = el;
        }
      });
      return elements;
    }
  
    addEventListeners() {
      this.elements.nextBtn.addEventListener('click', () => this.pairDevice());
      this.elements.unpairBtn.addEventListener('click', () => this.elements.modalUnpair.classList.remove('hidden'));
      this.elements.unpairCancel.addEventListener('click', () => this.elements.modalUnpair.classList.add('hidden'));
      this.elements.unpairConfirm.addEventListener('click', () => this.unpairDevice());
      this.elements.backToPairBtn.addEventListener('click', () => this.resetToPairingScreen());
  
      const scanBtn = document.getElementById("scan-btn");
      const serialInput = document.getElementById("serial-input-display");
  
      scanBtn.addEventListener("click", () => {
        this.showImage("assets/CGMS.jpg");
          setTimeout(() => {
            this.hideLoading();
            this.pairDevice(); 
          }, 3500);
      });  
    }
  
    updateInput() {
      if (this.serialNumber && this.serialNumber.length > 0) {
        this.elements.serialInputDisplay.textContent = this.serialNumber;
        this.elements.charCount.textContent = String(this.serialNumber.length);
      }
    }
  
    navigate(screen) {
      this.elements.screenPair.classList.toggle('hidden', screen !== 'pair');
      this.elements.screenPaired.classList.toggle('hidden', screen !== 'paired');
      this.elements.screenPaired.classList.toggle('flex', screen === 'paired');
    }
  
    pairDevice() {
      this.serialNumber = document.getElementById("serial-input-display").value;
      if (this.serialNumber.length === 0) return;
      this.elements.nextBtn.disabled = true;
      this.elements.modalConnecting.classList.remove('hidden');
  
      setTimeout(() => {
        this.elements.modalConnecting.classList.add('hidden');
        this.elements.pairedSerial.textContent = this.serialNumber;
        this.elements.pairedSerial2.textContent = this.serialNumber;
        this.navigate('paired');
        this.elements.nextBtn.disabled = false;
  
        localStorage.setItem("cgms_serial", this.serialNumber);
        localStorage.setItem("cgms_paired", "true");
        this.updatePairingFromStorage();
      }, 2000);
    }
  
    unpairDevice() {
      this.elements.modalUnpair.classList.add('hidden');
      this.serialNumber = "";
      this.updateInput();
      this.navigate('pair');
      localStorage.removeItem("cgms_serial");
      localStorage.setItem("cgms_paired", "false");
      this.updatePairingFromStorage();
    }
  
    resetToPairingScreen() {
      this.navigate('pair');
    }
  
    restoreState() {
      const paired = localStorage.getItem("cgms_paired");
      const savedSerial = localStorage.getItem("cgms_serial");
      if (paired === "true" && savedSerial) {
        this.serialNumber = savedSerial;
        this.elements.pairedSerial.textContent = savedSerial;
        this.elements.pairedSerial2.textContent = savedSerial;
        this.navigate('paired');
      }
    }
  
    updatePairingFromStorage() {
      const paired = localStorage.getItem("cgms_paired") === "true";
      const serial = localStorage.getItem("cgms_serial") || "--";
  
      const cgmsSection = document.querySelector(".cgms-middle-section");
      if (cgmsSection) cgmsSection.style.display = paired ? "block" : "none";
  
      const name20El = document.querySelector(".name-20");
      if (name20El) {
        name20El.textContent = paired ? serial : "--";
        name20El.nextElementSibling.textContent = paired ? "مقترن" : "غير مقترن";
      }
  
      const sensorAgeEl = document.querySelector(".text-white.mb-1");
      if (sensorAgeEl) sensorAgeEl.textContent = paired ? "15 يوم" : "";
  
      const deviceIdEl = document.querySelector(".device-id-line");
      if (deviceIdEl) deviceIdEl.textContent = paired ? "9001B1" : "--";
  
      const insulinEl = document.querySelector(".amount-16");
      if (insulinEl) insulinEl.textContent = paired ? "123 وحدة" : "--";
  
      const blocks = document.querySelectorAll(".icon-block.block3");
      blocks.forEach(block => {
        if (paired) {
          block.style.display = "block";
          block.style.backgroundColor = "transparent";
        } else {
          block.removeAttribute("style");
        }
      });
    }

    showImage(src) {
      let container = document.getElementById("app-container");
      let overlay = document.createElement("div");
      overlay.id = "image-overlay";
      overlay.style.position = "absolute";
      overlay.style.top = 0;
      overlay.style.left = 0;
      overlay.style.width = "100%";
      overlay.style.height = "100%";
      overlay.style.background = "rgba(0,0,0,0.85)";
      overlay.style.display = "flex";
      overlay.style.alignItems = "center";
      overlay.style.justifyContent = "center";
      overlay.style.zIndex = 9999;
      overlay.style.overflow = "hidden";

      let img = document.createElement("img");
      img.src = src;
      img.style.width = "100%";
      img.style.height = "100%";
      img.style.objectFit = "cover";
      img.style.marginTop = "80px";
      img.style.objectPosition = "center -50px";
      img.style.transform = "translateY(100%)";
      img.style.animation = "slideUp 0.7s ease-out forwards";
      overlay.style.background = "linear-gradient(to bottom, transparent 80px, rgba(0,0,0,0.85) 50px)";

      overlay.appendChild(img);
      container.appendChild(overlay);

      setTimeout(() => { overlay.remove(); }, 2500);

      let style = document.createElement("style");
      style.innerHTML = `
        @keyframes slideUp {
          from { transform: translateY(100%); opacity:0.7; }
          to { transform: translateY(0); opacity:1; }
        }
      `;
      document.head.appendChild(style);
    }

    showLoading(text) {
      let loadingDiv = document.createElement("div");
      loadingDiv.id = "loading-overlay";
      loadingDiv.style.position = "absolute";
      loadingDiv.style.top = 0;
      loadingDiv.style.left = 0;
      loadingDiv.style.width = "100%";
      loadingDiv.style.height = "100%";
      loadingDiv.style.background = "rgba(0,0,0,0.4)";
      loadingDiv.style.display = "flex";
      loadingDiv.style.alignItems = "center";
      loadingDiv.style.justifyContent = "center";
      loadingDiv.style.zIndex = 10000;

      let box = document.createElement("div");
      box.style.background = "#fff";
      box.style.padding = "10px 15px";
      box.style.borderRadius = "10px";
      box.style.display = "flex";
      box.style.flexDirection = "column";
      box.style.alignItems = "center";
      box.style.justifyContent = "center";
      box.style.gap = "10px";
      box.style.boxShadow = "0 4px 12px rgba(0,0,0,0.2)";

      let spinner = document.createElementNS("http://www.w3.org/2000/svg", "svg");
      spinner.setAttribute("viewBox", "0 0 24 24");
      spinner.style.width = "30px";
      spinner.style.height = "30px";
      spinner.innerHTML = `
        <g fill="#1d4ed8">
        ${Array.from({ length: 12 }).map((_, i) => {
        const angle = i * 30;
        const delay = -(i * (1 / 12)).toFixed(3);
        return `<rect x="11" y="1" width="2" height="6" rx="1" transform="rotate(${angle} 12 12)">
          <animate attributeName="opacity" values="1;0" dur="0.8s" begin="${delay}s" repeatCount="indefinite"/>
          </rect>`;
      }).join("")}
        </g>
      `;

      let textEl = document.createElement("div");
      textEl.innerText = text;
      textEl.style.color = "#333";
      textEl.style.fontSize = "1rem";
      textEl.style.fontWeight = "bold";

      box.appendChild(spinner);
      box.appendChild(textEl);
      loadingDiv.appendChild(box);
      document.getElementById("app-container").appendChild(loadingDiv);
    }

    hideLoading() {
      const overlay = document.getElementById("loading-overlay");
      if (overlay) overlay.remove();
    }
    
    showKeyboard() { }
  }

  document.addEventListener('DOMContentLoaded', () => { new SensorPairingApp(); });
  
  // Navigate directly to main page without going back in history
  function navigateToMainPage() {
    const isPump = localStorage.getItem("display_mode");
    const href = (isPump && isPump === "pump") ? "pda-mode.html?openMenu=true" : "suspend.html?openMenu=true";
    window.location.href = href;
  }
</script>
<script src="js/keyboard.js"></script>
<script src="js/control-screen.js"></script>
<script src="js/shared-rules.js"></script>
<script src="js/cgms-scanner.js"></script>
</body>
</html>